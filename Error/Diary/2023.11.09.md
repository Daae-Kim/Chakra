# 2023.11.09

테스트 코드 작성 중 받아오는 객체 중 한개의 속성이 0으로 고정되어들어오는 문제가 있었다.

원인 찾기가 어려워 시간을 많이 소비했는데, 다음 로직을 먼저 테스트할 생각으로 넘어간 순간 문제가 되던 속성을 설정해주는 함수를 찾았다! 2일정도 붙잡고 있었는데, 때론 자리를 벗어나고 되돌아 오는것도 방법인것 같다.

이후엔 118개나 되는 컬럼들을 5세트정도 일일이 db에 저장해줘야하는 상황을 만났다.

서버의 db에서 저장되어있는 데이터를 텍스트 파일로 저장하고 불러오는 방식을 사용해야하나등 고민이 꼬리에꼬리를 물어 침대까지 이어졌다.

그런데 다음날 아침 선언한 변수를 const 로 선언하고 필요한 컬럼만 지정해주면된다는 사실을 발견했다. :]

```tsx
const data: somthing[] = [{
column1: 1,
column2 :2,
column3 :3,
...}]
--->
const data = [{
need1: 1,
need2: 2,
}]
```

이때까지 알게된것을 정리해보면,

mock 을 사용해서 의존하는 함수 대체, pg-mem 을 사용해서 db와의 완전한 분리(→ pg-mem을 사용하면 서버와 연결되는 db 대신 가상 메모리에 데이터를 처리하여 db연산을 대신 수행할 수 있다.)를 구현해보았고, matches도 다양하게 사용해보았다.

보충되었으면 하는 것들을 생각해보면,

실제 DB의 연산을 pg-mem 으로 연결하는 작업, 연결한 가상메모리에 데이터를 저장하고 처리 하는 부분(webcalender는 왜 혼자 mock entity를 만들어야하는지 이해가 안된다..)

부족하다고 생각한 이유는,

가상 메모리에 데이터를 저장하고 이것을 토대로 service 연산을 수행하는데 이 과정에서 기대값이 들어오지 않는 경우가 많다.

---
