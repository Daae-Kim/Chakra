# error : 2023.11.29 - 테스트에서의 오류

## **문제상황**

service 에서 게시글을 findOne()하면 viewCount 가 1 증가 해야하는데 테스트코드에서는 viewCount이 0일때만 1증가하고, 이외의 숫자일때는 증가하지 않는 문제가 있었다.

## **해결 및 원인**

service단의 버그인줄알고, 코드를 들여다보고 있었는데 console.log()로 테스트코드내에서 생성한 post를 관찰한 결과 post.create에서는 post를 생성할때 viewCount를 생성하지 않고 있었다.

모종의 이유로 테스트 환경에서 가상 메모리를 이용해 테스트시 필요한 데이터를 만들고, 그 데이터에 대해 동작을 테스트하고 있다. 그러나 보니 필요한 속성만을 생성해서 테스트를 하는데 효율을 찾겠다고 한 과거의 행동이 현재의 에러로 돌아왔다.. 편리함을 찾는것도 중요하지만 편리함을 찾았다면 꼭 그것을 기록해두고 다음 코드릐 기준이 될 수 있도록 해야한다.

- 테스트 코드내에서 데이터를 생성할때 잘 생성하고 있는지 확인 필요
- 테스트 코드를 위한 함수를 작성하는것은 또다른 테스트를 불러오는것같다.

---

![Untitled](../../Picture/error3.png)

그나저나 coverage 100%를 달성했다! :]

